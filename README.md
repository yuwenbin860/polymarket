# Polymarket ç»„åˆå¥—åˆ©ç³»ç»Ÿ (Polymarket Arbitrage Scanner)

**v5.4 - Production Ready**

> âš ï¸ **é£é™©æç¤º**: æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ã€‚é¢„æµ‹å¸‚åœºäº¤æ˜“å­˜åœ¨æé«˜é£é™©ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºé¢„è¨€æœºé”™è¯¯ã€æµåŠ¨æ€§æ¯ç«­ã€æ™ºèƒ½åˆçº¦æ¼æ´ç­‰ã€‚ä½¿ç”¨è€…éœ€è‡ªè¡Œæ‰¿æ‹…æ‰€æœ‰èµ„é‡‘æŸå¤±é£é™©ã€‚

## 1. é¡¹ç›®æ¦‚è¿°

**Polymarket ç»„åˆå¥—åˆ©ç³»ç»Ÿ**æ˜¯ä¸€ä¸ªä¸“ä¸šçš„é¢„æµ‹å¸‚åœºå¥—åˆ©æœºä¼šå‘ç°ä¸éªŒè¯å·¥å…·ã€‚å®ƒä¸ä¾èµ–ä¼ ç»Ÿçš„"é¢„æµ‹æœªæ¥"ï¼Œè€Œæ˜¯é€šè¿‡æ•°å­¦é€»è¾‘å’Œè¯­ä¹‰åˆ†ææ¥å‘ç°å¸‚åœºå®šä»·ä¸­çš„çŸ›ç›¾ã€‚

ç³»ç»ŸåŸºäº **"è¯­ä¹‰Alpha" (Semantic Alpha)** ç†è®ºï¼Œåˆ©ç”¨ LLMï¼ˆå¤§è¯­è¨€æ¨¡å‹ï¼‰ç†è§£å¸‚åœºé—®é¢˜ä¹‹é—´çš„é€»è¾‘å…³ç³»ï¼ˆå¦‚è•´å«ã€äº’æ–¥ã€ç­‰ä»·ï¼‰ï¼Œå¹¶ç»“åˆä¸¥æ ¼çš„æ•°å­¦éªŒè¯æ¡†æ¶å‘ç°æ— é£é™©æˆ–ä½é£é™©å¥—åˆ©æœºä¼šã€‚

### æ ¸å¿ƒä»·å€¼
- **è‡ªåŠ¨åŒ–æ‰«æ**: 7x24å°æ—¶ç›‘æ§ Polymarket æ•°åƒä¸ªå¸‚åœºã€‚
- **è¯­ä¹‰ç†è§£**: è¯†åˆ« "BTC > 100k" ä¸ "BTC > 95k" ä¹‹é—´çš„é€»è¾‘å…³è”ã€‚
- **é£æ§é—­ç¯**: å†…ç½® APY è®¡ç®—ã€é¢„è¨€æœºå¯¹é½æ£€æŸ¥ã€è®¢å•ç°¿æ·±åº¦éªŒè¯ã€‚
- **å¯è§†åŒ–çœ‹æ¿**: æä¾› Web UI ä»ªè¡¨ç›˜ï¼Œå®æ—¶è¿½è¸ªæœºä¼šä¸èµ„é‡‘æµã€‚

---

## 2. å¿«é€Ÿå¼€å§‹ (Quick Start)

### æ–¹å¼ä¸€ï¼šDocker éƒ¨ç½² (æ¨è)

æœ€ç®€å•çš„æ–¹å¼ï¼Œæ— éœ€é…ç½® Python ç¯å¢ƒã€‚

```bash
# 1. å…‹éš†ä»“åº“ (å‡è®¾å·²å…‹éš†)

# 2. é…ç½®ç¯å¢ƒ
cp config.example.json config.json
# ç¼–è¾‘ config.json å¡«å…¥ä½ çš„ LLM API Key (å¦‚ DeepSeek/OpenAI)

# 3. å¯åŠ¨æœåŠ¡ (åå°è¿è¡Œ Scanner å’Œ Web UI)
docker-compose up -d

# 4. è®¿é—® Web UI
# æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:8501
```

### æ–¹å¼äºŒï¼šæœ¬åœ°å®‰è£… (Local)

é€‚åˆå¼€å‘è€…è¿›è¡Œè°ƒè¯•å’ŒäºŒæ¬¡å¼€å‘ã€‚

**å‰ç½®è¦æ±‚**: Python 3.9+, Git

```bash
# 1. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 2. é…ç½®ç¯å¢ƒ
cp config.example.json config.json
# ç¼–è¾‘ config.json å¡«å…¥é…ç½®

# 3. è¿è¡Œäº¤äº’å¼æ‰«æå™¨
python local_scanner_v2.py

# 4. è¿è¡Œ Web UI
streamlit run web_app.py
```

---

## 3. æ‰§è¡Œæ¨¡å¼ (Execution Modes)

ç³»ç»Ÿæ”¯æŒä¸‰ç§ä¸»è¦è¿è¡Œæ¨¡å¼ï¼š

| æ¨¡å¼ | å‘½ä»¤å‚æ•° | æè¿° | ç”¨é€” |
|------|----------|------|------|
| **å‘ç°æ¨¡å¼ (Discovery)** | `python local_scanner_v2.py` | ä»…åˆ†æå¸‚åœºï¼Œè®¡ç®—æœºä¼šï¼Œä¸æ‰§è¡Œäº¤æ˜“ | æ—¥å¸¸ç›‘æ§ã€ç­–ç•¥åˆ†æ |
| **è°ƒè¯•æ¨¡å¼ (Debug)** | `--mode debug` | è¿è¡Œå®Œæ•´æµç¨‹ï¼ˆåŒ…æ‹¬é£æ§ï¼‰ï¼Œä½†**è·³è¿‡æœ€ç»ˆä¸Šé“¾** | éªŒè¯ç³»ç»Ÿè¿é€šæ€§ã€æµ‹è¯•é£æ§é€»è¾‘ |
| **ç”Ÿäº§æ¨¡å¼ (Production)** | `--mode production` | çœŸå®æ‰§è¡Œäº¤æ˜“ï¼Œæ¶ˆè€— Gas å’Œèµ„é‡‘ | **çœŸå®å¥—åˆ©** (éœ€é…ç½®ç§é’¥) |

**ç¤ºä¾‹å‘½ä»¤**:

```bash
# 1. é»˜è®¤å‘ç°æ¨¡å¼ (äº¤äº’å¼èœå•)
python local_scanner_v2.py

# 2. è°ƒè¯•æ¨¡å¼è¿è¡Œå•è°ƒæ€§ç­–ç•¥ (éäº¤äº’å¼)
python local_scanner_v2.py --mode debug --strategies monotonicity --domain crypto

# 3. ç”Ÿäº§æ¨¡å¼ (éœ€è°¨æ…!)
python local_scanner_v2.py --mode production --strategies interval --min-apy 20
```

---

## 4. æ ¸å¿ƒåŠŸèƒ½ä¸ç­–ç•¥

ç³»ç»Ÿå†…ç½®å¤šç§å¥—åˆ©ç­–ç•¥ï¼ŒæŒ‰ä¼˜å…ˆçº§æ’åºï¼š

| ç­–ç•¥ID | ç­–ç•¥åç§° | æè¿° | é£é™©ç­‰çº§ | æ¨èæŒ‡æ•° | è¿è¡Œå‘½ä»¤ |
|--------|---------|------|----------|----------|----------|
| `monotonicity` | **å•è°ƒæ€§è¿èƒŒ** | æ£€æµ‹é˜¶æ¢¯è¡Œæƒä»·å¸‚åœºçš„ä»·æ ¼å€’æŒ‚ (å¦‚ BTC>100k ä»·æ ¼ä½äº BTC>105k) | ğŸŸ¢ æä½ | â­â­â­â­â­ | `--strategies monotonicity` |
| `interval` | **åŒºé—´å¥—åˆ©** | åˆ©ç”¨äº’è¡¥åŒºé—´ä»·æ ¼æ€»å’Œ < 1.0 çš„æœºä¼š | ğŸŸ¢ ä½ | â­â­â­â­â­ | `--strategies interval` |
| `exhaustive` | **å®Œå¤‡é›†å¥—åˆ©** | äº’æ–¥é€‰é¡¹æ€»ä»· < 1.0 (å¦‚èƒœè€…åªèƒ½æ˜¯ A, B, C ä¹‹ä¸€) | ğŸŸ¡ ä¸­ | â­â­â­â­ | `--strategies exhaustive` |
| `implication` | **è•´å«å…³ç³»** | å½“ A å‘ç”Ÿå¿…ç„¶å¯¼è‡´ B å‘ç”Ÿï¼Œä½† P(B) < P(A) | ğŸŸ¡ ä¸­ | â­â­â­ | `--strategies implication` |
| `equivalent` | **ç­‰ä»·å¸‚åœº** | ä¸åŒè¡¨è¿°çš„åŒä¸€äº‹ä»¶ä»·æ ¼ä¸ä¸€è‡´ | ğŸŸ¡ ä¸­ | â­â­â­ | `--strategies equivalent` |
| `temporal` | **æ—¶åºå¥—åˆ©** | åˆ©ç”¨æ—¶é—´ç´¯ç§¯æ¦‚ç‡çš„è¿èƒŒ (å¦‚ "1æœˆå‘ç”Ÿçš„æ¦‚ç‡" vs "2æœˆå‰å‘ç”Ÿçš„æ¦‚ç‡") | ğŸŸ¢ ä½ | â­â­â­ | `--strategies temporal` |

**ä½¿ç”¨ç‰¹å®šç­–ç•¥æ‰«æ**:
```bash
# ä»…è¿è¡Œå•è°ƒæ€§å’ŒåŒºé—´ç­–ç•¥
python local_scanner_v2.py --strategies monotonicity,interval
```

---

## 5. éªŒè¯ç®¡é“ (Validation Pipeline)

ç³»ç»ŸåŒ…å«ä¸¥æ ¼çš„ 6 å±‚éªŒè¯ç®¡é“ï¼Œç¡®ä¿å‘ç°çš„æœºä¼šçœŸå®æœ‰æ•ˆï¼š

1.  **LLM è¯­ä¹‰éªŒè¯**: ç¡®è®¤å¸‚åœºæè¿°æ˜¯å¦å­˜åœ¨é€»è¾‘çŸ›ç›¾ã€‚
2.  **Oracle ä¸€è‡´æ€§**: æ£€æŸ¥ç›¸å…³å¸‚åœºçš„é¢„è¨€æœºæ¥æºæ˜¯å¦ä¸€è‡´ (é¿å…ä¸åŒæ•°æ®æºå¯¼è‡´çš„ä»·å·®)ã€‚
3.  **VWAP ä»·æ ¼éªŒè¯**: åŸºäºè®¢å•ç°¿æ·±åº¦è®¡ç®—åŠ æƒå¹³å‡ä»·æ ¼ï¼Œè€Œéä»…çœ‹æœ€æ–°æˆäº¤ä»·ã€‚
4.  **APY è®¡ç®—**: è€ƒè™‘èµ„é‡‘å ç”¨æ—¶é—´ã€Gas è´¹ã€æ»‘ç‚¹åçš„å¹´åŒ–æ”¶ç›Šç‡ã€‚
5.  **äººå·¥å¤æ ¸ (Human Review)**: é«˜é£é™©æ“ä½œå‰çš„ç¡®è®¤ (å¯é…ç½®)ã€‚
6.  **Pre-flight Check**: ä¸Šé“¾å‰çš„æœ€ç»ˆçŠ¶æ€æ£€æŸ¥ã€‚

---

## 6. é…ç½®è¯´æ˜ (Configuration Guide)

é…ç½®æ–‡ä»¶ `config.json` æ˜¯ç³»ç»Ÿçš„æ ¸å¿ƒæ§åˆ¶ä¸­å¿ƒã€‚

### å…³é”®é…ç½®é¡¹

| åˆ†ç±» | å‚æ•° | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|------|--------|
| **LLM** | `active_profile` | å½“å‰ä½¿ç”¨çš„ LLM é…ç½® (siliconflow, deepseek, ollama) | siliconflow |
| **æ‰«æ** | `market_limit` | å•æ¬¡è·å–çš„å¸‚åœºæ•°é‡é™åˆ¶ | 200 |
| **æ‰«æ** | `scan_domain` | æ‰«æé¢†åŸŸ (crypto, politics, sports) | crypto |
| **é£æ§** | `min_profit_pct` | æœ€å°å‡€åˆ©æ¶¦ç™¾åˆ†æ¯” | 2.0% |
| **é£æ§** | `min_apy` | æœ€å°å¹´åŒ–æ”¶ç›Šç‡ (APY) | 15.0% |
| **é£æ§** | `min_liquidity` | æœ€å°æµåŠ¨æ€§è¦æ±‚ (USDC) | 10000 |
| **é£æ§** | `min_orderbook_depth` | è®¢å•ç°¿æœ€å°æ·±åº¦ (ç”¨äºè®¡ç®—æ»‘ç‚¹) | 500.0 |
| **é£æ§** | `exclude_resolved` | æ˜¯å¦æ’é™¤å·²ç»“ç®—å¸‚åœº | true |

**ä¿®æ”¹é…ç½®ç¤ºä¾‹**:
ä¿®æ”¹ `config.json` ä¸­çš„ `active_profile` å³å¯åˆ‡æ¢ LLM æä¾›å•†ã€‚

```json
"active_profile": "ollama",
```

---

## 7. æ•…éšœæ’é™¤ (Troubleshooting)

### å¸¸è§é—®é¢˜

**Q1: æ‰«æé€Ÿåº¦å¾ˆæ…¢?**
- **åŸå› **: è®¢å•ç°¿æ•°æ®è·å–éœ€è¦å¤§é‡ç½‘ç»œè¯·æ±‚ã€‚
- **è§£æ³•**: å‡å° `market_limit` (å¦‚ 100)ï¼Œæˆ–åœ¨ `config.json` ä¸­å¢åŠ  `fetch_rate_limit`ã€‚

**Q2: æŠ¥é”™ "LLM API Error"?**
- **åŸå› **: API Key æ— æ•ˆæˆ–é¢åº¦è€—å°½ã€‚
- **è§£æ³•**: æ£€æŸ¥ `config.json` ä¸­çš„ `api_key`ï¼Œæˆ–åˆ‡æ¢åˆ° `ollama` æœ¬åœ°æ¨¡å‹ã€‚

**Q3: æ‰¾ä¸åˆ°å¥—åˆ©æœºä¼š?**
- **åŸå› **: å¸‚åœºæ•ˆç‡æé«˜ï¼Œæ˜¾æ€§æœºä¼šå‡å°‘ï¼›æˆ–è¿‡æ»¤æ¡ä»¶å¤ªä¸¥ã€‚
- **è§£æ³•**:
    - é™ä½ `min_profit_pct` (å¦‚ 1.0%)
    - é™ä½ `min_apy` (å¦‚ 10%)
    - æ‰©å¤§æ‰«æèŒƒå›´ (`--market-limit 500`)
    - å°è¯• `--domain politics` ç­‰å…¶ä»–é¢†åŸŸ

**Q4: WebSocket è¿æ¥å¤±è´¥?**
- **åŸå› **: ç½‘ç»œé—®é¢˜æˆ– Polymarket æœåŠ¡å™¨é™åˆ¶ã€‚
- **è§£æ³•**: ç¨‹åºä¼šè‡ªåŠ¨é‡è¯•ã€‚å¦‚æœæŒç»­å¤±è´¥ï¼Œæ£€æŸ¥ VPN/ä»£ç†è®¾ç½®ã€‚

---

## 8. é¡¹ç›®ç»“æ„

```
polymarket/
â”œâ”€â”€ local_scanner_v2.py      # ä¸»ç¨‹åºå…¥å£ (CLI)
â”œâ”€â”€ web_app.py               # Web UI å…¥å£ (Streamlit)
â”œâ”€â”€ strategies/              # ç­–ç•¥æ¨¡å—
â”‚   â”œâ”€â”€ monotonicity.py      # å•è°ƒæ€§ç­–ç•¥
â”‚   â”œâ”€â”€ interval.py          # åŒºé—´ç­–ç•¥
â”‚   â””â”€â”€ ...
â”œâ”€â”€ validation_engine.py     # å…­å±‚éªŒè¯å¼•æ“ (æ ¸å¿ƒé£æ§)
â”œâ”€â”€ validators.py            # åŸºç¡€éªŒè¯å™¨ (APY, Oracle, Depth)
â”œâ”€â”€ llm_providers.py         # LLM æ¥å£æŠ½è±¡å±‚
â”œâ”€â”€ config.json              # é…ç½®æ–‡ä»¶
â”œâ”€â”€ Dockerfile               # å®¹å™¨æ„å»ºæ–‡ä»¶
â””â”€â”€ docs/                    # é¡¹ç›®æ–‡æ¡£
    â”œâ”€â”€ PROJECT_BIBLE.md     # é¡¹ç›®åœ£ç»
    â””â”€â”€ WORK_PLAN.md         # å¼€å‘è®¡åˆ’
```

---

**Version**: v5.4
**Last Updated**: 2026-01-17
