# Polymarket å¥—åˆ©ç³»ç»Ÿæ¶æ„æ–‡æ¡£

## 1. ç³»ç»Ÿæ¦‚è§ˆ

Polymarket Combination Arbitrage System æ˜¯ä¸€ä¸ªè‡ªåŠ¨åŒ–çš„é¢„æµ‹å¸‚åœºå¥—åˆ©å‘ç°ç³»ç»Ÿã€‚ç³»ç»Ÿé€šè¿‡åˆ†æ Polymarket ä¸Šçš„å¸‚åœºå®šä»·ï¼Œåˆ©ç”¨ LLMï¼ˆå¤§è¯­è¨€æ¨¡å‹ï¼‰è¯†åˆ«å¸‚åœºé—´çš„é€»è¾‘å…³ç³»ï¼Œä»è€Œå‘ç°å¥—åˆ©æœºä¼šã€‚

### æ ¸å¿ƒæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          Polymarket å¥—åˆ©ç³»ç»Ÿæ¶æ„                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   é…ç½®ç³»ç»Ÿ   â”‚â”€â”€â”€â”€â–¶â”‚  LLM æŠ½è±¡å±‚ â”‚â”€â”€â”€â”€â–¶â”‚  å¤šLLMæ”¯æŒ  â”‚
    â”‚ config.py   â”‚     â”‚llm_providersâ”‚     â”‚ OpenAI/...  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                                      â”‚
            â–¼                                      â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                    ArbitrageScanner                      â”‚
    â”‚                   (ä¸»æ§åˆ¶å™¨/åè°ƒå™¨)                       â”‚
    â”‚                  local_scanner_v2.py:2843                â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                       â”‚                       â”‚
        â–¼                       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Polymarket    â”‚     â”‚ LLMAnalyzer   â”‚     â”‚Arbitrage      â”‚
â”‚ Client        â”‚     â”‚               â”‚     â”‚ Detector      â”‚
â”‚ (æ•°æ®è·å–)    â”‚â”€â”€â”€â”€â–¶â”‚ (è¯­ä¹‰åˆ†æ)    â”‚â”€â”€â”€â”€â–¶â”‚ (å¥—åˆ©æ£€æµ‹)    â”‚
â”‚ :253          â”‚     â”‚ :1068         â”‚     â”‚ :1526         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                       â”‚                       â”‚
        â–¼                       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Similarity    â”‚     â”‚  Prompt       â”‚     â”‚  Math         â”‚
â”‚ Filter        â”‚     â”‚  System       â”‚     â”‚  Validator    â”‚
â”‚ (ç›¸ä¼¼åº¦è¿‡æ»¤)  â”‚     â”‚  prompts.py   â”‚     â”‚  (æ•°å­¦éªŒè¯)   â”‚
â”‚ :2795         â”‚     â”‚               â”‚     â”‚               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                       â”‚                       â”‚
        â–¼                       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         è¾“å‡ºæŠ¥å‘Šç³»ç»Ÿ                              â”‚
â”‚                    JSON + æ§åˆ¶å°è¾“å‡º                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. æ ¸å¿ƒç»„ä»¶è¯¦è§£

### 2.1 ArbitrageScanner (ä¸»æ§åˆ¶å™¨)

**æ–‡ä»¶ä½ç½®**: `local_scanner_v2.py:2843`

**èŒè´£**: åè°ƒæ•´ä¸ªæ‰«ææµç¨‹ï¼Œç®¡ç†æ‰€æœ‰å­ç»„ä»¶

**æ ¸å¿ƒæ–¹æ³•**:
```python
class ArbitrageScanner:
    def __init__(self, config: Config):
        self.client = PolymarketClient()      # API å®¢æˆ·ç«¯
        self.analyzer = LLMAnalyzer(config)   # LLM åˆ†æå™¨
        self.detector = ArbitrageDetector()   # å¥—åˆ©æ£€æµ‹å™¨
        self.filter = SimilarityFilter()      # ç›¸ä¼¼åº¦è¿‡æ»¤å™¨

    def scan(self) -> List[ArbitrageOpportunity]:
        """ä¸»æ‰«ææ–¹æ³•ï¼Œæ‰§è¡Œå®Œæ•´çš„å¥—åˆ©æ£€æµ‹æµç¨‹"""
```

### 2.2 PolymarketClient (æ•°æ®è·å–å±‚)

**æ–‡ä»¶ä½ç½®**: `local_scanner_v2.py:253`

**èŒè´£**: ä¸ Polymarket Gamma API äº¤äº’ï¼Œè·å–å¸‚åœºæ•°æ®

**æ ¸å¿ƒæ–¹æ³•**:
| æ–¹æ³• | è¯´æ˜ |
|------|------|
| `get_markets(limit, active, min_liquidity)` | è·å–å¸‚åœºåˆ—è¡¨ |
| `get_markets_by_tag(tag_slug)` | æŒ‰æ ‡ç­¾è·å–å¸‚åœºï¼ˆæ”¯æŒ domainï¼‰ |
| `get_orderbook(market)` | è·å–è®¢å•ç°¿æ•°æ® |

**API ç«¯ç‚¹**: `https://gamma-api.polymarket.com`

### 2.3 LLMAnalyzer (è¯­ä¹‰åˆ†æå±‚)

**æ–‡ä»¶ä½ç½®**: `local_scanner_v2.py:1068`

**èŒè´£**: ä½¿ç”¨ LLM åˆ†æå¸‚åœºé—´çš„é€»è¾‘å…³ç³»

**æ ¸å¿ƒæ–¹æ³•**:
```python
def analyze(self, market_a: Market, market_b: Market) -> Dict:
    """
    è¿”å›ç»“æœåŒ…å«:
    - relationship: RelationType (IMPLIES_AB, IMPLIES_BA, EQUIVALENT, etc.)
    - confidence: float (0-1)
    - reasoning: str (LLM æ¨ç†è¿‡ç¨‹)
    - edge_cases: List[str]
    """
```

**æ”¯æŒçš„ LLM æä¾›å•†** (é€šè¿‡ `llm_providers.py`):
- OpenAI (GPT-4o)
- Anthropic (Claude)
- DeepSeek (æ¨èï¼Œä½æˆæœ¬)
- Aliyun (Qwen)
- Zhipu (GLM)
- Ollama (æœ¬åœ°)
- å…¶ä»– OpenAI å…¼å®¹æ¥å£

### 2.4 ArbitrageDetector (å¥—åˆ©æ£€æµ‹å±‚)

**æ–‡ä»¶ä½ç½®**: `local_scanner_v2.py:1526`

**èŒè´£**: æ ¹æ®é€»è¾‘å…³ç³»å’Œä»·æ ¼æ£€æµ‹å¥—åˆ©æœºä¼š

**æ ¸å¿ƒæ–¹æ³•**:
| æ–¹æ³• | å¥—åˆ©ç±»å‹ |
|------|----------|
| `check_exhaustive_set(markets)` | å®Œå¤‡é›†å¥—åˆ© |
| `_check_implication(m1, m2, analysis)` | è•´å«å¥—åˆ© |
| `_check_equivalent(m1, m2, analysis)` | ç­‰ä»·å¸‚åœºå¥—åˆ© |
| `check_cross_event_interval_arbitrage()` | è·¨äº‹ä»¶åŒºé—´å¥—åˆ© |

### 2.5 SimilarityFilter (ç›¸ä¼¼åº¦è¿‡æ»¤å±‚)

**æ–‡ä»¶ä½ç½®**: `local_scanner_v2.py:2795`

**èŒè´£**: ä½¿ç”¨ Jaccard ç›¸ä¼¼åº¦ç­›é€‰å¯èƒ½ç›¸å…³çš„å¸‚åœºå¯¹

**æ ¸å¿ƒæ–¹æ³•**:
```python
def find_similar_pairs(self, markets: List[Market]) -> List[Tuple[Market, Market, float]]:
    """
    è¿”å›ç›¸ä¼¼åº¦å¤§äºé˜ˆå€¼çš„å¸‚åœºå¯¹
    ç›¸ä¼¼åº¦è®¡ç®—: Jaccard(token_set_a, token_set_b)
    """
```

---

## 3. æ”¯æŒçš„å¥—åˆ©ç±»å‹

### 3.1 å®Œå¤‡é›†å¥—åˆ© (Exhaustive Set Arbitrage)

**æ–‡ä»¶ä½ç½®**: `local_scanner_v2.py:1653-1768`

#### æ•°å­¦åŸç†
å¦‚æœä¸€ç»„é€‰é¡¹ **äº’æ–¥** ä¸” **ç©·å°½æ‰€æœ‰å¯èƒ½æ€§**ï¼Œå®ƒä»¬çš„æ¦‚ç‡ä¹‹å’Œåº”è¯¥ç­‰äº 1ï¼š
```
P(A) + P(B) + P(C) + ... = 1
```

å½“å¸‚åœºå®šä»·é”™è¯¯ï¼Œä½¿å¾—æ‰€æœ‰é€‰é¡¹çš„ YES ä»·æ ¼ä¹‹å’Œ < 1 æ—¶ï¼Œå­˜åœ¨å¥—åˆ©æœºä¼šã€‚

#### æ£€æµ‹æ¡ä»¶
```python
# 1. åŒä¸€ event_id (åŒä¸€äº‹ä»¶)
# 2. ç›¸åŒçš„ resolution_source (ç»“ç®—æ¥æº)
# 3. ç›¸åŒçš„ç»“ç®—æ—¥æœŸ
# 4. YES ä»·æ ¼ä¹‹å’Œ < 0.98 (å…è®¸2%æ»‘ç‚¹/æ‰‹ç»­è´¹)

if real_total < 0.98:
    # å‘ç°å¥—åˆ©æœºä¼š
```

#### å¥—åˆ©ç­–ç•¥
| æ“ä½œ | è¯´æ˜ |
|------|------|
| ä¹°å…¥æ‰€æœ‰å¸‚åœºçš„ YES | æ— è®ºå“ªä¸ªç»“æœå‘ç”Ÿï¼Œæ€»æœ‰ä¸€ä¸ªä¼šæ”¯ä»˜ $1 |
| æˆæœ¬ | sum(yes_prices) |
| ä¿è¯æ”¶ç›Š | $1.00 |
| åˆ©æ¶¦ | $1.00 - æˆæœ¬ |

#### ç¤ºä¾‹
```
å¸‚åœº A: "BTC > $100k å¹´åº•?"  YESä»·æ ¼: $0.30
å¸‚åœº B: "BTC $50k-$100k å¹´åº•?" YESä»·æ ¼: $0.25
å¸‚åœº C: "BTC < $50k å¹´åº•?"   YESä»·æ ¼: $0.35

æ€»æˆæœ¬: $0.30 + $0.25 + $0.35 = $0.90
ä¿è¯æ”¶ç›Š: $1.00
åˆ©æ¶¦: 10%
```

#### æµç¨‹å›¾
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å®Œå¤‡é›†å¥—åˆ©æ£€æµ‹æµç¨‹                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    è·å–å¸‚åœºåˆ—è¡¨
                         â”‚
                         â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  æŒ‰ event_id åˆ†ç»„   â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  æ£€æŸ¥åŒç»„å†…å¸‚åœº      â”‚
              â”‚  - åŒä¸€ç»“ç®—æ¥æº      â”‚
              â”‚  - åŒä¸€ç»“ç®—æ—¥æœŸ      â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  è®¡ç®— YES ä»·æ ¼å’Œ    â”‚
              â”‚  real_total < 0.98? â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚           â”‚
                   Yes          No
                    â”‚            â”‚
                    â–¼            â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    (è·³è¿‡)
         â”‚ LLM è¯­ä¹‰éªŒè¯  â”‚
         â”‚ - äº’æ–¥éªŒè¯    â”‚
         â”‚ - å®Œå¤‡æ€§éªŒè¯  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ ç”Ÿæˆå¥—åˆ©æœºä¼š  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 3.2 è•´å«å¥—åˆ© (Implication Arbitrage)

**æ–‡ä»¶ä½ç½®**: `local_scanner_v2.py:1760-1955`

#### æ•°å­¦åŸç†
å¦‚æœäº‹ä»¶ A è•´å«äº‹ä»¶ B (A â†’ B)ï¼Œé‚£ä¹ˆ:
```
P(B) â‰¥ P(A)
```

å½“å¸‚åœºè¿åè¿™ä¸ªçº¦æŸæ—¶ (P(B) < P(A))ï¼Œå­˜åœ¨å¥—åˆ©æœºä¼šã€‚

#### æ£€æµ‹æ¡ä»¶
```python
# LLM åˆ¤æ–­å…³ç³»ä¸º IMPLIES_AB (A â†’ B) æˆ– IMPLIES_BA (B â†’ A)
# ç½®ä¿¡åº¦ > min_confidence (é»˜è®¤ 0.8)

# æ ¸å¿ƒå¥—åˆ©æ¡ä»¶
if implied.yes_price < implying.yes_price - 0.01:
    # è¿åçº¦æŸï¼Œå­˜åœ¨å¥—åˆ©
```

#### å¥—åˆ©ç­–ç•¥ (A â†’ B æ—¶)
| æ“ä½œ | è¯´æ˜ |
|------|------|
| ä¹°å…¥ B çš„ YES | å½“ A å‘ç”Ÿæ—¶ B å¿…ç„¶å‘ç”Ÿ |
| ä¹°å…¥ A çš„ NO | å¯¹å†² A ä¸å‘ç”Ÿçš„æƒ…å†µ |
| æˆæœ¬ | P(B) + (1 - P(A)) |
| ä¿è¯æ”¶ç›Š | â‰¥ $1.00 |

#### ç¤ºä¾‹
```
å¸‚åœº A: "ETH > $5k å¹´åº•"           YESä»·æ ¼: $0.40
å¸‚åœº B: "ETH > $4k å¹´åº•"           YESä»·æ ¼: $0.30

é€»è¾‘: A â†’ B (å¦‚æœ ETH > $5kï¼Œå¿…ç„¶ > $4k)
çº¦æŸ: P(B) â‰¥ P(A)
è¿è§„: $0.30 < $0.40 âœ—

å¥—åˆ©:
- ä¹°å…¥ B çš„ YES: æˆæœ¬ $0.30
- ä¹°å…¥ A çš„ NO: æˆæœ¬ $0.60 (1 - $0.40)
- æ€»æˆæœ¬: $0.90
- ä¿è¯æ”¶ç›Š: â‰¥ $1.00
- åˆ©æ¶¦: â‰¥ 10%
```

#### æµç¨‹å›¾
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    è•´å«å¥—åˆ©æ£€æµ‹æµç¨‹                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                ç›¸ä¼¼å¸‚åœºå¯¹ (ç”± SimilarityFilter)
                         â”‚
                         â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚     LLM åˆ†æ        â”‚
              â”‚  åˆ¤æ–­é€»è¾‘å…³ç³»:       â”‚
              â”‚  IMPLIES_AB/BA ?    â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚           â”‚
                   è•´å«        å…¶ä»–å…³ç³»
                    â”‚            â”‚
                    â–¼            â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    (å…¶ä»–æ£€æµ‹)
         â”‚ éªŒè¯ä»·æ ¼çº¦æŸ  â”‚
         â”‚ P(B) â‰¥ P(A)? â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚     â”‚
            è¿å   æ»¡è¶³
              â”‚      â”‚
              â–¼      â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  (æ— å¥—åˆ©)
    â”‚ å¤šå±‚éªŒè¯:  â”‚
    â”‚ - æ•°å­¦éªŒè¯ â”‚
    â”‚ - æ—¶é—´ä¸€è‡´ â”‚
    â”‚ - è¯­ä¹‰éªŒè¯ â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ ç”Ÿæˆå¥—åˆ©   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 3.3 ç­‰ä»·å¸‚åœºå¥—åˆ© (Equivalent Market Arbitrage)

**æ–‡ä»¶ä½ç½®**: `local_scanner_v2.py:2065-2128`

#### æ•°å­¦åŸç†
ä¸¤ä¸ªå¸‚åœºæè¿°å®Œå…¨ç›¸åŒçš„äº‹ä»¶ï¼Œåº”è¯¥æœ‰ç›¸åŒçš„ä»·æ ¼:
```
P(A) = P(B)
```

å½“ä»·æ ¼å·®å¼‚è¶…è¿‡é˜ˆå€¼æ—¶ï¼Œå­˜åœ¨å¥—åˆ©æœºä¼šã€‚

#### æ£€æµ‹æ¡ä»¶
```python
# LLM åˆ¤æ–­ä¸º EQUIVALENT å…³ç³»
# ä»·æ ¼å·®å¼‚ > 3%

spread = abs(market_a.yes_price - market_b.yes_price)
if spread > 0.03:
    # å‘ç°å¥—åˆ©æœºä¼š
```

#### å¥—åˆ©ç­–ç•¥
| æ“ä½œ | è¯´æ˜ |
|------|------|
| ä¹°å…¥ä½ä»·å¸‚åœºçš„ YES | è´­ä¹°ä½ä¼°çš„èµ„äº§ |
| ä¹°å…¥é«˜ä»·å¸‚åœºçš„ NO | å–å‡ºé«˜ä¼°çš„èµ„äº§ |
| æˆæœ¬ | P(ä½) + (1 - P(é«˜)) |
| ä¿è¯æ”¶ç›Š | $1.00 |
| åˆ©æ¶¦ | $1.00 - æˆæœ¬ |

#### ç¤ºä¾‹
```
å¸‚åœº A: "BTC å¹´åº•çªç ´ $100k"     YESä»·æ ¼: $0.35
å¸‚åœº B: "Bitcoin 2025è¶…è¿‡10ä¸‡ç¾å…ƒ" YESä»·æ ¼: $0.28

LLM åˆ¤æ–­: ç­‰ä»·å¸‚åœº
ä»·å·®: 7%

å¥—åˆ©:
- ä¹°å…¥ B çš„ YES: æˆæœ¬ $0.28
- ä¹°å…¥ A çš„ NO: æˆæœ¬ $0.65 (1 - $0.35)
- æ€»æˆæœ¬: $0.93
- ä¿è¯æ”¶ç›Š: $1.00
- åˆ©æ¶¦: 7%
```

---

### 3.4 åŒºé—´å¥—åˆ© (Interval Arbitrage)

**æ–‡ä»¶ä½ç½®**: `local_scanner_v2.py` (è·¨äº‹ä»¶åŒºé—´å¥—åˆ©)

#### é€‚ç”¨äºå¤š Outcome å¸‚åœº
Polymarket æ”¯æŒåŒºé—´å¸‚åœºï¼ˆå¦‚ "BTC ä»·æ ¼ $50k-$100k"ï¼‰ï¼Œè¿™ç±»å¸‚åœºå¯ä»¥æ£€æµ‹åŒºé—´è¦†ç›–å…³ç³»ã€‚

#### å…³ç³»ç±»å‹
| ç±»å‹ | è¯´æ˜ |
|------|------|
| INTERVAL_COVERS | A çš„åŒºé—´å®Œå…¨è¦†ç›– B |
| INTERVAL_SUBSET | A æ˜¯ B çš„å­é›† |
| INTERVAL_OVERLAP | A å’Œ B æœ‰éƒ¨åˆ†é‡å  |

---

## 4. å®Œæ•´æ•°æ®æµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           å®Œæ•´æ‰«ææµç¨‹                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    ç”¨æˆ·æ‰§è¡Œ: python local_scanner_v2.py
              â”‚
              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 1. åˆå§‹åŒ–                                                    â”‚
    â”‚    - è§£æå‘½ä»¤è¡Œå‚æ•° (--profile, --domain, --threshold)       â”‚
    â”‚    - åŠ è½½é…ç½® (config.json > ç¯å¢ƒå˜é‡ > é»˜è®¤å€¼)              â”‚
    â”‚    - åˆ›å»º ArbitrageScanner å®ä¾‹                             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 2. è·å–å¸‚åœºæ•°æ®                                              â”‚
    â”‚    PolymarketClient.get_markets_by_tag(domain)              â”‚
    â”‚    â”‚                                                         â”‚
    â”‚    â”œâ”€ ç¼“å­˜æ£€æŸ¥ (TTL: 1å°æ—¶)                                  â”‚
    â”‚    â”œâ”€ API è°ƒç”¨: gamma-api.polymarket.com                   â”‚
    â”‚    â””â”€ è§£æä¸º Market å¯¹è±¡                                     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 3. é¢„å¤„ç†                                                    â”‚
    â”‚    - è¿‡æ»¤ä½æµåŠ¨æ€§å¸‚åœº (min_liquidity: $10,000)               â”‚
    â”‚    - æŒ‰ event_id åˆ†ç»„ (ç”¨äºå®Œå¤‡é›†æ£€æµ‹)                       â”‚
    â”‚    - è®¡ç®—æœ‰æ•ˆä»·æ ¼ (effective_buy_price, effective_sell_price) â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 4. å¤šè·¯å¾„å¹¶è¡Œæ£€æµ‹                                            â”‚
    â”‚                                                             â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚  â”‚ è·¯å¾„ A: å®Œå¤‡é›†å¥—åˆ©                                    â”‚   â”‚
    â”‚  â”‚    å¯¹æ¯ä¸ª event_group:                               â”‚   â”‚
    â”‚  â”‚    check_exhaustive_set(group)                       â”‚   â”‚
    â”‚  â”‚    â†’ LLM éªŒè¯äº’æ–¥æ€§å’Œå®Œå¤‡æ€§                           â”‚   â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    â”‚                                                             â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚  â”‚ è·¯å¾„ B: ç›¸ä¼¼å¸‚åœºå¯¹æ£€æµ‹ (ä¼ ç»Ÿæ¨¡å¼)                     â”‚   â”‚
    â”‚  â”‚    SimilarityFilter.find_similar_pairs()             â”‚   â”‚
    â”‚  â”‚    â†’ Jaccard ç›¸ä¼¼åº¦ > threshold                      â”‚   â”‚
    â”‚  â”‚                                                      â”‚   â”‚
    â”‚  â”‚ æˆ–                                                    â”‚   â”‚
    â”‚  â”‚ è·¯å¾„ B: è¯­ä¹‰èšç±» (å‘é‡åŒ–æ¨¡å¼)                         â”‚   â”‚
    â”‚  â”‚    SemanticClusterer.cluster()                       â”‚   â”‚
    â”‚  â”‚    â†’ åµŒå…¥å‘é‡ + èšç±»                                  â”‚   â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    â”‚                             â”‚                               â”‚
    â”‚                             â–¼                               â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚  â”‚ è·¯å¾„ C: LLM å…³ç³»åˆ†æ                                 â”‚   â”‚
    â”‚  â”‚    å¯¹æ¯ä¸ªå¸‚åœºå¯¹:                                     â”‚   â”‚
    â”‚  â”‚    LLMAnalyzer.analyze(m1, m2)                       â”‚   â”‚
    â”‚  â”‚    â†’ åˆ¤æ–­é€»è¾‘å…³ç³»ç±»å‹                                â”‚   â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    â”‚                             â”‚                               â”‚
    â”‚                             â–¼                               â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚  â”‚ è·¯å¾„ D: å¥—åˆ©æ£€æµ‹                                     â”‚   â”‚
    â”‚  â”‚    ArbitrageDetector.check_pair()                   â”‚   â”‚
    â”‚  â”‚    â†’ è•´å«å¥—åˆ© / ç­‰ä»·å¥—åˆ© / å…¶ä»–                      â”‚   â”‚
    â”‚  â”‚    â†’ MathValidator æ•°å­¦éªŒè¯                         â”‚   â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 5. ç”ŸæˆæŠ¥å‘Š                                                  â”‚
    â”‚    - æ±‡æ€»æ‰€æœ‰å¥—åˆ©æœºä¼š                                        â”‚
    â”‚    - æŒ‰ profit_pct æ’åº                                     â”‚
    â”‚    - ä¿å­˜åˆ° output/scan_YYYYMMDD_HHMMSS.json               â”‚
    â”‚    - æ§åˆ¶å°è¾“å‡ºæ‘˜è¦                                          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. æ•°æ®ç»“æ„

### 5.1 Market (å¸‚åœºå¯¹è±¡)

**æ–‡ä»¶ä½ç½®**: `local_scanner_v2.py:145`

```python
@dataclass
class Market:
    # === åŸºæœ¬ä¿¡æ¯ ===
    id: str                           # å¸‚åœºå”¯ä¸€æ ‡è¯†
    condition_id: str                 # æ¡ä»¶ID
    question: str                     # å¸‚åœºé—®é¢˜
    description: str                  # å¸‚åœºæè¿°

    # === ä»·æ ¼ä¿¡æ¯ ===
    yes_price: float                  # YES ä¸­é—´ä»·/å‚è€ƒä»·
    no_price: float                   # NO ä¸­é—´ä»· (1 - yes_price)
    best_bid: float                   # æœ€ä½³ä¹°ä»· (å®é™…å–å‡ºä»·)
    best_ask: float                   # æœ€ä½³å–ä»· (å®é™…ä¹°å…¥ä»·)
    spread: float                     # ä»·å·®

    # === å¸‚åœºæ•°æ® ===
    volume: float                     # äº¤æ˜“é‡
    liquidity: float                  # æµåŠ¨æ€§
    end_date: str                     # ç»“ç®—æ—¥æœŸ
    event_id: str                     # äº‹ä»¶ID
    event_title: str                  # äº‹ä»¶æ ‡é¢˜
    resolution_source: str            # ç»“ç®—æ¥æº
    outcomes: List[str]               # å¯èƒ½ç»“æœ
    token_id: str                     # CLOB token ID

    # === Rules åˆ†æ (é‡è¦!) ===
    event_description: str            # å®Œæ•´çš„ resolution rules
    tags: List[Dict]                  # å¸‚åœºæ ‡ç­¾

    # === åŒºé—´å¸‚åœº (å¤š outcome) ===
    group_item_title: str             # åŒºé—´é¡¹æ ‡é¢˜
    interval_lower: float             # åŒºé—´ä¸‹ç•Œ
    interval_upper: float             # åŒºé—´ä¸Šç•Œ
```

### 5.2 ArbitrageOpportunity (å¥—åˆ©æœºä¼š)

**æ–‡ä»¶ä½ç½®**: `local_scanner_v2.py:206`

```python
@dataclass
class ArbitrageOpportunity:
    id: str                           # å¥—åˆ©æœºä¼šID
    type: str                         # å¥—åˆ©ç±»å‹
    markets: List[Dict]               # æ¶‰åŠçš„å¸‚åœº
    relationship: str                 # é€»è¾‘å…³ç³»
    confidence: float                 # ç½®ä¿¡åº¦ (0-1)
    total_cost: float                 # æ€»æˆæœ¬
    guaranteed_return: float          # ä¿è¯æ”¶ç›Š
    profit: float                     # åˆ©æ¶¦é‡‘é¢
    profit_pct: float                 # åˆ©æ¶¦ç™¾åˆ†æ¯”
    action: str                       # æ‰§è¡ŒæŒ‡ä»¤
    reasoning: str                    # æ¨ç†è¯´æ˜
    edge_cases: List[str]             # è¾¹ç•Œæƒ…å†µ
    needs_review: List[str]           # éœ€è¦äººå·¥å®¡æŸ¥çš„ç‚¹
    timestamp: str                    # æ—¶é—´æˆ³
```

### 5.3 RelationType (å…³ç³»ç±»å‹æšä¸¾)

**æ–‡ä»¶ä½ç½®**: `local_scanner_v2.py:124`

```python
class RelationType(Enum):
    IMPLIES_AB = "implies_ab"         # A â†’ B (P(B) â‰¥ P(A))
    IMPLIES_BA = "implies_ba"         # B â†’ A (P(A) â‰¥ P(B))
    EQUIVALENT = "equivalent"         # ç­‰ä»·å¸‚åœº
    MUTUAL_EXCLUSIVE = "mutual_exclusive"  # äº’æ–¥ (P(A) + P(B) â‰¤ 1)
    EXHAUSTIVE = "exhaustive"         # å®Œå¤‡é›†æˆå‘˜
    UNRELATED = "unrelated"           # æ— å…³

    # åŒºé—´å…³ç³»
    INTERVAL_COVERS = "interval_covers"     # A è¦†ç›– B
    INTERVAL_SUBSET = "interval_subset"     # A æ˜¯ B çš„å­é›†
    INTERVAL_OVERLAP = "interval_overlap"   # åŒºé—´é‡å 
```

---

## 6. é…ç½®ç³»ç»Ÿ

### 6.1 é…ç½®æ–‡ä»¶ç»“æ„

**æ–‡ä»¶ä½ç½®**: `config.py`

```python
@dataclass
class LLMSettings:                     # LLM é…ç½®
    provider: str = "deepseek"         # æä¾›å•†
    model: str = "deepseek-chat"       # æ¨¡å‹åç§°
    api_key: str = ""                  # API å¯†é’¥
    api_base: str = ""                 # API ç«¯ç‚¹
    max_tokens: int = 4000             # æœ€å¤§è¾“å‡º
    temperature: float = 0.1           # æ¸©åº¦å‚æ•°
    timeout: int = 60                  # è¶…æ—¶æ—¶é—´

@dataclass
class ScanSettings:                    # æ‰«æé…ç½®
    market_limit: int = 200            # å¸‚åœºæ•°é‡é™åˆ¶
    similarity_threshold: float = 0.3  # ç›¸ä¼¼åº¦é˜ˆå€¼
    min_profit_pct: float = 2.0        # æœ€å°åˆ©æ¶¦ %
    min_liquidity: float = 10000       # æœ€å°æµåŠ¨æ€§
    min_confidence: float = 0.8        # æœ€å° LLM ç½®ä¿¡åº¦
    max_llm_calls: int = 300          # LLM è°ƒç”¨ä¸Šé™

@dataclass
class OutputSettings:                  # è¾“å‡ºé…ç½®
    output_dir: str = "./output"       # è¾“å‡ºç›®å½•
    cache_dir: str = "./cache"         # ç¼“å­˜ç›®å½•
    log_level: str = "INFO"            # æ—¥å¿—çº§åˆ«
    detailed_output: bool = True       # è¯¦ç»†è¾“å‡º
```

### 6.2 é…ç½®åŠ è½½ä¼˜å…ˆçº§

```
1. å‘½ä»¤è¡Œå‚æ•° --profile (æœ€é«˜ä¼˜å…ˆçº§)
   â†“
2. config.json ä¸­çš„ llm_profiles
   â†“
3. config.json ä¸­çš„ä¸»é…ç½®
   â†“
4. ç¯å¢ƒå˜é‡
   â†“
5. é»˜è®¤å€¼ (æœ€ä½ä¼˜å…ˆçº§)
```

### 6.3 æ”¯æŒçš„ç¯å¢ƒå˜é‡

| å˜é‡å | è¯´æ˜ |
|--------|------|
| `LLM_PROVIDER` | LLM æä¾›å•† |
| `LLM_API_KEY` | API å¯†é’¥ |
| `LLM_MODEL` | æ¨¡å‹åç§° |
| `MARKET_LIMIT` | å¸‚åœºæ•°é‡é™åˆ¶ |
| `MIN_PROFIT_PCT` | æœ€å°åˆ©æ¶¦ç™¾åˆ†æ¯” |
| `MIN_LIQUIDITY` | æœ€å°æµåŠ¨æ€§ |
| `MIN_CONFIDENCE` | æœ€å°ç½®ä¿¡åº¦ |

---

## 7. å…³é”®è®¾è®¡å†³ç­–

### 7.1 Rules åˆ†æä¼˜å…ˆ

ç³»ç»Ÿä¼˜å…ˆè¯»å– `event_description` å­—æ®µè·å–å®Œæ•´çš„ç»“ç®—è§„åˆ™ï¼Œè€Œéä»…ä¾èµ– `question`ã€‚

**åŸå› **: ç»“ç®—è§„åˆ™å†³å®šäº†å¸‚åœºçš„çœŸæ­£å«ä¹‰ï¼Œå¿½ç•¥ rules ä¼šå¯¼è‡´é”™è¯¯åˆ†æã€‚

**å®ç°**:
```python
# prompts.py ä¸­ä¼˜å…ˆä¼ é€’ event_description
rules = market.event_description or market.description
```

### 7.2 å¤šå±‚éªŒè¯æœºåˆ¶

æ¯ç±»å¥—åˆ©éƒ½ç»è¿‡å¤šå±‚éªŒè¯:
1. æ•°æ®æœ‰æ•ˆæ€§æ£€æŸ¥
2. æ•°å­¦éªŒè¯ (MathValidator)
3. æ—¶é—´ä¸€è‡´æ€§éªŒè¯
4. è¯­ä¹‰éªŒè¯ (LLM)

### 7.3 LLM ä½œä¸ºå¢å¼ºå±‚

- LLM ç”¨äºè¯†åˆ«å¤æ‚é€»è¾‘å…³ç³»
- æä¾›è§„åˆ™åŒ¹é…ä½œä¸ºé™çº§æ–¹æ¡ˆ
- æ”¯æŒå¤šæ¨¡å‹æŠ•ç¥¨éªŒè¯

### 7.4 æ¨¡å—åŒ–è®¾è®¡

å„ç»„ä»¶èŒè´£æ¸…æ™°ï¼Œæ˜“äºæ‰©å±•æ–°çš„å¥—åˆ©ç±»å‹ã€‚

---

## 8. è¿è¡Œç¤ºä¾‹

```bash
# åŸºæœ¬è¿è¡Œ
python local_scanner_v2.py

# æŒ‡å®šé¢†åŸŸ
python local_scanner_v2.py --domain crypto

# ä½¿ç”¨ç‰¹å®šé…ç½®
python local_scanner_v2.py --profile custom

# è°ƒæ•´åˆ©æ¶¦é˜ˆå€¼
python local_scanner_v2.py --threshold 5.0
```

---

## 9. è¾“å‡ºç¤ºä¾‹

```json
{
  "scan_time": "2026-01-11T12:00:00",
  "scan_mode": "vector",
  "domain": "crypto",
  "markets_scanned": 150,
  "pairs_analyzed": 45,
  "arbitrage_opportunities": [
    {
      "id": "arb_20250111_001",
      "type": "exhaustive_set",
      "markets": [
        {"question": "BTC > $100k?", "yes_price": 0.30},
        {"question": "BTC $50k-$100k?", "yes_price": 0.25},
        {"question": "BTC < $50k?", "yes_price": 0.35}
      ],
      "relationship": "EXHAUSTIVE",
      "confidence": 0.95,
      "total_cost": 0.90,
      "guaranteed_return": 1.00,
      "profit_pct": 10.0,
      "action": "ä¹°å…¥æ‰€æœ‰å¸‚åœºçš„ YES",
      "needs_review": ["ç¡®è®¤ç»“ç®—è§„åˆ™å…¼å®¹æ€§"]
    }
  ]
}
```

---

## 10. æ–‡ä»¶ç»“æ„æ€»è§ˆ

```
polymarket/
â”œâ”€â”€ local_scanner_v2.py       # ä¸»æ‰«æå™¨ (çº¦4000è¡Œ)
â”‚   â”œâ”€â”€ Market (145)          # å¸‚åœºæ•°æ®ç±»
â”‚   â”œâ”€â”€ RelationType (124)    # å…³ç³»ç±»å‹æšä¸¾
â”‚   â”œâ”€â”€ ArbitrageOpportunity (206)  # å¥—åˆ©æœºä¼šç±»
â”‚   â”œâ”€â”€ PolymarketClient (253)      # API å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ LLMAnalyzer (1068)          # LLM åˆ†æå™¨
â”‚   â”œâ”€â”€ ArbitrageDetector (1526)    # å¥—åˆ©æ£€æµ‹å™¨
â”‚   â”œâ”€â”€ SimilarityFilter (2795)     # ç›¸ä¼¼åº¦è¿‡æ»¤å™¨
â”‚   â””â”€â”€ ArbitrageScanner (2843)     # ä¸»æ§åˆ¶å™¨
â”‚
â”œâ”€â”€ llm_providers.py          # LLM æŠ½è±¡å±‚ (æ”¯æŒ9ç§æä¾›å•†)
â”œâ”€â”€ config.py                 # é…ç½®ç³»ç»Ÿ
â”œâ”€â”€ prompts.py                # Prompt æ¨¡æ¿åº“
â”œâ”€â”€ semantic_cluster.py       # è¯­ä¹‰èšç±»æ¨¡å—
â”œâ”€â”€ validators.py             # æ•°å­¦éªŒè¯å™¨
â”‚
â”œâ”€â”€ config.json               # ç”¨æˆ·é…ç½®æ–‡ä»¶
â”œâ”€â”€ requirements.txt          # ä¾èµ–åˆ—è¡¨
â”‚
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ ARCHITECTURE.md       # æ¶æ„æ–‡æ¡£ (æœ¬æ–‡ä»¶)
â”‚   â”œâ”€â”€ PROJECT_BIBLE.md      # é¡¹ç›®åœ£ç» (æƒå¨æŒ‡å—)
â”‚   â”œâ”€â”€ WORK_PLAN.md          # å·¥ä½œè®¡åˆ’
â”‚   â””â”€â”€ PROGRESS.md           # è¿›åº¦æ—¥å¿—
â”‚
â”œâ”€â”€ output/                   # æ‰«æç»“æœè¾“å‡º
â”‚   â””â”€â”€ scan_*.json
â”‚
â””â”€â”€ cache/                    # å¸‚åœºæ•°æ®ç¼“å­˜
    â””â”€â”€ *_markets.json
```

---

## 11. æ”¯æŒçš„å¥—åˆ©ç±»å‹æ±‡æ€»

| å¥—åˆ©ç±»å‹ | æ£€æµ‹æ¡ä»¶ | å®ç°ä½ç½® | çŠ¶æ€ |
|----------|----------|----------|------|
| å®Œå¤‡é›†å¥—åˆ© | sum(prices) < 0.98 | check_exhaustive_set() | âœ… å·²å®ç° |
| è•´å«å¥—åˆ© (Aâ†’B) | P(B) < P(A) | _check_implication() | âœ… å·²å®ç° |
| ç­‰ä»·å¸‚åœºå¥—åˆ© | spread > 3% | _check_equivalent() | âœ… å·²å®ç° |
| åŒºé—´å¥—åˆ© | åŒºé—´è¦†ç›–å…³ç³» | check_cross_event_interval_arbitrage() | âœ… å·²å®ç° |
| äº’æ–¥å¥—åˆ© | P(A) + P(B) < 1 | (å¯æ‰©å±•) | ğŸ”„ è®¡åˆ’ä¸­ |
| è·¨å¹³å°å¥—åˆ© | ä¸åŒäº¤æ˜“æ‰€ä»·å·® | (æ–°æ¨¡å—) | ğŸ“‹ æœªæ¥ |
| æ—¶é—´å¥—åˆ© | ä»·æ ¼éšæ—¶é—´å˜åŒ– | (æ–°æ¨¡å—) | ğŸ“‹ æœªæ¥ |

---

## 12. è¯¦ç»†å›¾è¡¨

### 12.1 åºåˆ—å›¾ - å®Œå¤‡é›†å¥—åˆ©æ£€æµ‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Scanner   â”‚    â”‚   Client    â”‚    â”‚  Detector   â”‚    â”‚  Analyzer   â”‚    â”‚    LLM      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                  â”‚                  â”‚                  â”‚                  â”‚
   scan()                 â”‚                  â”‚                  â”‚                  â”‚
       â”‚                  â”‚                  â”‚                  â”‚                  â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ get_markets()    â”‚                  â”‚                  â”‚
       â”‚                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                  â”‚                  â”‚
       â”‚                  â”‚                  â”‚                  â”‚                  â”‚
       â”‚                  â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ Market[]         â”‚                  â”‚
       â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                  â”‚                  â”‚                  â”‚
       â”‚                  â”‚                  â”‚                  â”‚                  â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ check_exhaustive â”‚                  â”‚
       â”‚                  â”‚                  â”‚                  â”‚                  â”‚
       â”‚                  â”‚                  â”‚ verify_with_llm()â”‚                  â”‚
       â”‚                  â”‚                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
       â”‚                  â”‚                  â”‚                  â”‚ åˆ†æäº’æ–¥æ€§å’Œå®Œå¤‡æ€§ â”‚
       â”‚                  â”‚                  â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚                  â”‚                  â”‚                  â”‚                  â”‚
       â”‚                  â”‚                  â”‚ is_exhaustive   â”‚                  â”‚
       â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ Opportunity?     â”‚                  â”‚
       â”‚                  â”‚                  â”‚                  â”‚                  â”‚
   ç»“æœé›†                â”‚                  â”‚                  â”‚                  â”‚
```

### 12.2 åºåˆ—å›¾ - è•´å«å¥—åˆ©æ£€æµ‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Scanner   â”‚    â”‚  Similarity â”‚    â”‚  Analyzer   â”‚    â”‚  Detector   â”‚    â”‚    LLM      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                  â”‚                  â”‚                  â”‚                  â”‚
   scan()                 â”‚                  â”‚                  â”‚                  â”‚
       â”‚                  â”‚                  â”‚                  â”‚                  â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ find_similar()   â”‚                  â”‚                  â”‚
       â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ MarketPairs[]    â”‚                  â”‚                  â”‚
       â”‚                  â”‚                  â”‚                  â”‚                  â”‚
       â”‚   for each pair: â”‚                  â”‚                  â”‚                  â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ analyze(m1,m2)   â”‚                  â”‚
       â”‚                  â”‚                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
       â”‚                  â”‚                  â”‚                  â”‚ åˆ¤æ–­é€»è¾‘å…³ç³»       â”‚
       â”‚                  â”‚                  â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚                  â”‚                  â”‚                  â”‚                  â”‚
       â”‚                  â”‚                  â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ IMPLIES_AB       â”‚
       â”‚                  â”‚                  â”‚                  â”‚                  â”‚
       â”‚                  â”‚                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ check_implication â”‚
       â”‚                  â”‚                  â”‚                  â”‚                  â”‚
       â”‚                  â”‚                  â”‚                  â”‚ æ•°å­¦éªŒè¯          â”‚
       â”‚                  â”‚                  â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ Opportunity?      â”‚
       â”‚                  â”‚                  â”‚                  â”‚                  â”‚
   ç»“æœé›†                â”‚                  â”‚                  â”‚                  â”‚
```

### 12.3 çŠ¶æ€å›¾ - å¥—åˆ©æ£€æµ‹æµç¨‹

```
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚   å¼€å§‹æ‰«æ     â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚    è·å–å¸‚åœºæ•°æ®         â”‚
                    â”‚ PolymarketClient.get   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚      é¢„å¤„ç†å¸‚åœº         â”‚
                    â”‚ è¿‡æ»¤/åˆ†ç»„/è®¡ç®—ä»·æ ¼      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚    å¤šè·¯å¾„å¹¶è¡Œæ£€æµ‹       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
                                 â”‚                                  â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
                â”‚                â”‚                â”‚                 â”‚
                â–¼                â–¼                â–¼                 â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
        â”‚  å®Œå¤‡é›†æ£€æµ‹    â”‚ â”‚  ç›¸ä¼¼å¸‚åœºå¯¹    â”‚ â”‚  åŒºé—´å¥—åˆ©æ£€æµ‹  â”‚      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
                â”‚                 â”‚                 â”‚               â”‚
                â–¼                 â–¼                 â–¼               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
        â”‚   LLMéªŒè¯     â”‚ â”‚   LLMåˆ†æ     â”‚ â”‚  åŒºé—´å…³ç³»æ£€æŸ¥ â”‚      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
                â”‚                 â”‚                 â”‚               â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
                                  â”‚                                 â”‚
                                  â–¼                                 â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
                        â”‚    å¥—åˆ©æœºä¼šéªŒè¯       â”‚                   â”‚
                        â”‚ MathValidator        â”‚                   â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
                                   â”‚                               â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
                        â”‚   æœ‰æ•ˆå¥—åˆ©æœºä¼š?      â”‚                   â”‚
                        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                   â”‚
                           Yesâ”‚          â”‚No                       â”‚
                              â–¼           â–¼                        â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
                    â”‚  æ·»åŠ åˆ°ç»“æœ  â”‚  â”‚  è®°å½•æ—¥å¿—    â”‚               â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
                           â”‚                                        â”‚
                           â”‚           è¾¾åˆ°LLMè°ƒç”¨é™åˆ¶?              â”‚
                           â”‚           â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
                           â”‚           â”‚No  â”‚Yes         â”‚          â”‚
                           â”‚           â–¼    â–¼             â”‚          â”‚
                           â”‚    ç»§ç»­åˆ†æ  è¿”å›         â”‚          â”‚
                           â”‚                             â”‚          â”‚
                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
                                                           â”‚        â”‚
                                                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 12.4 ç±»å›¾ - æ ¸å¿ƒç±»å±‚æ¬¡ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              æ ¸å¿ƒç±»å…³ç³»å›¾                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Config         â”‚         â”‚      Market          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + llm: LLMSettings   â”‚         â”‚ + id: str            â”‚
â”‚ + scan: ScanSettings â”‚         â”‚ + question: str      â”‚
â”‚ + output: Output     â”‚         â”‚ + yes_price: float   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚ + event_id: str      â”‚
         â”‚                       â”‚ + event_description  â”‚
         â”‚                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                  â”‚
         â”‚                                  â”‚
         â–¼                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ArbitrageScanner    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”¤   SimilarityFilter   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - client: Polymarket â”‚         â”‚ + threshold: float   â”‚
â”‚ - analyzer: LLM      â”‚         â”‚ + find_similar()     â”‚
â”‚ - detector: Detect   â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ - filter: Similarity â”‚
â”‚                      â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ + scan()             â”‚         â”‚    LLMAnalyzer       â”‚
â”‚ + _group_by_event()  â”‚         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚ - client: BaseLLM    â”‚
           â”‚                     â”‚ - prompt: str        â”‚
           â”‚                     â”‚ + analyze()          â”‚
           â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                                â”‚
           â”‚                                â”‚
           â–¼                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PolymarketClient    â”‚         â”‚  ArbitrageDetector   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + get_markets()      â”‚         â”‚ + check_exhaustive() â”‚
â”‚ + get_markets_tag()  â”‚         â”‚ + check_pair()       â”‚
â”‚ + get_orderbook()    â”‚         â”‚ + _check_implication()â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚ + _check_equivalent() â”‚
                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                â”‚
                                                â–¼
                                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                â”‚    RelationType      â”‚
                                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                                â”‚ IMPLIES_AB           â”‚
                                â”‚ IMPLIES_BA           â”‚
                                â”‚ EQUIVALENT           â”‚
                                â”‚ EXHAUSTIVE           â”‚
                                â”‚ UNRELATED            â”‚
                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                â”‚
                                                â–¼
                                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                â”‚ ArbitrageOpportunity  â”‚
                                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                                â”‚ + type: str          â”‚
                                â”‚ + markets: List      â”‚
                                â”‚ + profit_pct: float  â”‚
                                â”‚ + action: str        â”‚
                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 12.5 LLM è°ƒç”¨æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         LLM åˆ†æè°ƒç”¨é“¾                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    LLMAnalyzer.analyze(market_a, market_b)
              â”‚
              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 1. å‡†å¤‡ Prompt                      â”‚
    â”‚    - è·å– event_description (ä¼˜å…ˆ)  â”‚
    â”‚    - æ„å»ºåˆ†æä¸Šä¸‹æ–‡                  â”‚
    â”‚    - é€‰æ‹© Prompt æ¨¡æ¿                â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 2. è°ƒç”¨ LLM Provider               â”‚
    â”‚    llm_client.chat(prompt)         â”‚
    â”‚                                     â”‚
    â”‚   æ”¯æŒçš„ Provider:                  â”‚
    â”‚   â”œâ”€â”€ OpenAI (GPT-4o)              â”‚
    â”‚   â”œâ”€â”€ Anthropic (Claude)           â”‚
    â”‚   â”œâ”€â”€ DeepSeek (æ¨è)              â”‚
    â”‚   â”œâ”€â”€ Aliyun (Qwen)                â”‚
    â”‚   â”œâ”€â”€ Zhipu (GLM)                  â”‚
    â”‚   â”œâ”€â”€ Ollama (æœ¬åœ°)                â”‚
    â”‚   â””â”€â”€ OpenAI Compatible            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 3. è§£æ LLM å“åº”                   â”‚
    â”‚    - æå– relationship             â”‚
    â”‚    - æå– confidence               â”‚
    â”‚    - æå– reasoning                â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 4. æ ‡å‡†åŒ–è¾“å‡º                       â”‚
    â”‚    - éªŒè¯å¿…è¦å­—æ®µå­˜åœ¨                â”‚
    â”‚    - å½’ä¸€åŒ– relationship            â”‚
    â”‚    - è¡¥å……é»˜è®¤å€¼                     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
              è¿”å› AnalysisResult
```

### 12.6 é…ç½®åŠ è½½æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         é…ç½®åŠ è½½ä¼˜å…ˆçº§                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    ç¨‹åºå¯åŠ¨
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. æ£€æŸ¥å‘½ä»¤è¡Œå‚æ•°         â”‚
â”‚    --profile <name>      â”‚â—„â”€â”€â”€â”€â”€ æœ€é«˜ä¼˜å…ˆçº§
â”‚    --domain <name>       â”‚
â”‚    --threshold <value>   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ æŒ‡å®šäº† profile?  â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
         â”‚Yes     â”‚No
         â–¼        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åŠ è½½æŒ‡å®š profile â”‚ â”‚ ä½¿ç”¨ default    â”‚
â”‚ (config.json)    â”‚ â”‚ (config.json)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                     â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ 2. æ£€æŸ¥ config.json  â”‚
         â”‚    ä¸»é…ç½®å­—æ®µ         â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ 3. æ£€æŸ¥ç¯å¢ƒå˜é‡       â”‚â—„â”€â”€â”€â”€â”€ è‡ªåŠ¨æ£€æµ‹
         â”‚    LLM_PROVIDER      â”‚       LLM_API_KEY
         â”‚    DEEPSEEK_API_KEY  â”‚       ç­‰
         â”‚    OPENAI_API_KEY    â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ 4. ä½¿ç”¨é»˜è®¤å€¼        â”‚â—„â”€â”€â”€â”€â”€ æœ€ä½ä¼˜å…ˆçº§
         â”‚    provider="deepseek"
         â”‚    model="deepseek-chat"
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚    Config å¯¹è±¡åˆ›å»º   â”‚
         â”‚    éªŒè¯é…ç½®æœ‰æ•ˆæ€§     â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
              ä¼ é€’ç»™ Scanner
```

### 12.7 éªŒè¯æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         å¤šå±‚éªŒè¯æœºåˆ¶                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    å¥—åˆ©å€™é€‰ (LLM åˆæ­¥å‘ç°)
              â”‚
              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ ç¬¬1å±‚: æ•°æ®æœ‰æ•ˆæ€§æ£€æŸ¥   â”‚
    â”‚ - å¸‚åœºä»·æ ¼ > 0         â”‚
    â”‚ - æµåŠ¨æ€§å……è¶³            â”‚
    â”‚ - å¸‚åœºæœªè¿‡æœŸ            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ ç¬¬2å±‚: æ•°å­¦éªŒè¯         â”‚
    â”‚ MathValidator.validate()â”‚
    â”‚ - åˆ©æ¶¦è®¡ç®—æ­£ç¡®æ€§        â”‚
    â”‚ - ä»·æ ¼çº¦æŸæ»¡è¶³          â”‚
    â”‚ - è¾¹ç•Œæ¡ä»¶æ£€æŸ¥          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ ç¬¬3å±‚: æ—¶é—´ä¸€è‡´æ€§éªŒè¯   â”‚
    â”‚ - ç»“ç®—æ—¥æœŸä¸€è‡´          â”‚
    â”‚ - ç»“ç®—æ¥æºä¸€è‡´          â”‚
    â”‚ - æ—¶é—´çª—å£æœ‰æ•ˆ          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ ç¬¬4å±‚: è¯­ä¹‰éªŒè¯         â”‚
    â”‚ _validate_arbitrage_sem â”‚
    â”‚ - LLM æ¨ç†é€»è¾‘          â”‚
    â”‚ - è¾¹ç•Œæƒ…å†µåˆ†æ          â”‚
    â”‚ - é£é™©è¯„ä¼°              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ é€šè¿‡æ‰€æœ‰éªŒè¯?           â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
         â”‚Yes           â”‚No
         â–¼              â–¼
   ç”Ÿæˆå¥—åˆ©æœºä¼š    æ ‡è®°ä¸ºéœ€å®¡æŸ¥/ä¸¢å¼ƒ
         â”‚
         â–¼
    æ·»åŠ åˆ°ç»“æœé›†
```

### 12.8 é”™è¯¯å¤„ç†æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         é”™è¯¯å¤„ç†ä¸é™çº§                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    æ“ä½œå‘èµ·
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ‰§è¡Œæ“ä½œ                â”‚
â”‚ (APIè°ƒç”¨/LLMè°ƒç”¨/è®¡ç®—)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  æ˜¯å¦æˆåŠŸ?   â”‚
    â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”˜
       â”‚Yes     â”‚No
       â–¼        â–¼
    è¿”å›ç»“æœ  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚ è®°å½•é”™è¯¯æ—¥å¿—         â”‚
             â”‚ output/llm_errors/  â”‚
             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚ æ˜¯å¦æœ‰é™çº§æ–¹æ¡ˆ?      â”‚
             â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                  â”‚Yes        â”‚No
                  â–¼           â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ ä½¿ç”¨é™çº§æ–¹æ¡ˆ  â”‚  â”‚ è·³è¿‡/ç»ˆæ­¢    â”‚
         â”‚              â”‚  â”‚              â”‚
         â”‚ LLMå¤±è´¥ â†’     â”‚  â”‚ APIå¤±è´¥ â†’   â”‚
         â”‚ è§„åˆ™åŒ¹é…     â”‚  â”‚ è¿”å›ç¼“å­˜     â”‚
         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
         ç»§ç»­å¤„ç†
```

### 12.9 å‘é‡åŒ–æ¨¡å¼æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         è¯­ä¹‰èšç±»æ¨¡å¼ (æ–°)                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    è·å–é¢†åŸŸå¸‚åœº (crypto/politics/sports)
              â”‚
              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ è¯­ä¹‰åµŒå…¥                â”‚
    â”‚ SemanticClusterer.embed â”‚
    â”‚ - ä½¿ç”¨ BGE æ¨¡å‹         â”‚
    â”‚ - question + descriptionâ”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ ç›¸ä¼¼åº¦è®¡ç®—              â”‚
    â”‚ - ä½™å¼¦ç›¸ä¼¼åº¦            â”‚
    â”‚ - é˜ˆå€¼è¿‡æ»¤              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ èšç±»                    â”‚
    â”‚ - ç›¸ä¼¼å¸‚åœºå½’ä¸ºä¸€ç»„      â”‚
    â”‚ - è·¨èšç±»åˆ†æ            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ èšç±»å†… LLM åˆ†æ         â”‚
    â”‚ - åˆ†æèšç±»å†…å…³ç³»        â”‚
    â”‚ - æ£€æµ‹å®Œå¤‡é›†            â”‚
    â”‚ - æ£€æµ‹è•´å«å…³ç³»          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
         ç”Ÿæˆå¥—åˆ©æœºä¼š
```

### 12.10 æ•°æ®æµè½¬å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         æ•°æ®æµè½¬æ€»è§ˆ                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Externalâ”‚     â”‚  Raw    â”‚     â”‚Parsed   â”‚     â”‚Filtered â”‚     â”‚ Analyzedâ”‚
  â”‚  API    â”‚â”€â”€â”€â”€â–¶â”‚  Data   â”‚â”€â”€â”€â”€â–¶â”‚ Markets â”‚â”€â”€â”€â”€â–¶â”‚ Markets â”‚â”€â”€â”€â”€â–¶â”‚ Pairs   â”‚
  â”‚Gamma APIâ”‚     â”‚ JSON    â”‚     â”‚ Objects â”‚     â”‚         â”‚     â”‚         â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                  â”‚                  â”‚
                                                  â”‚                  â–¼
                                                  â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                  â”‚           â”‚ LLM Response â”‚
                                                  â”‚           â”‚ - Relation   â”‚
                                                  â”‚           â”‚ - Confidence â”‚
                                                  â”‚           â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                                  â”‚                  â”‚
                                                  â–¼                  â–¼
                                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                          â”‚ Event       â”‚     â”‚Arbitrage    â”‚
                                          â”‚ Groups      â”‚â”€â”€â”€â”€â–¶â”‚Opportunities â”‚
                                          â”‚(for         â”‚     â”‚             â”‚
                                          â”‚Exhaustive)  â”‚     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
                                                                     â”‚
                                                                     â–¼
                                                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                            â”‚ Final Report â”‚
                                                            â”‚ - JSON       â”‚
                                                            â”‚ - Console    â”‚
                                                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 13. å…³é”®ä»£ç ä½ç½®ç´¢å¼•

| åŠŸèƒ½ | æ–‡ä»¶ | è¡Œå· | è¯´æ˜ |
|------|------|------|------|
| Market ç±»å®šä¹‰ | local_scanner_v2.py | 145 | å¸‚åœºæ•°æ®ç»“æ„ |
| RelationType æšä¸¾ | local_scanner_v2.py | 124 | å…³ç³»ç±»å‹å®šä¹‰ |
| ArbitrageOpportunity | local_scanner_v2.py | 206 | å¥—åˆ©æœºä¼šç»“æ„ |
| PolymarketClient | local_scanner_v2.py | 253 | API å®¢æˆ·ç«¯ |
| LLMAnalyzer | local_scanner_v2.py | 1068 | LLM åˆ†æå™¨ |
| ArbitrageDetector | local_scanner_v2.py | 1526 | å¥—åˆ©æ£€æµ‹å™¨ |
| SimilarityFilter | local_scanner_v2.py | 2795 | ç›¸ä¼¼åº¦è¿‡æ»¤å™¨ |
| ArbitrageScanner | local_scanner_v2.py | 2843 | ä¸»æ§åˆ¶å™¨ |
| main() å…¥å£ | local_scanner_v2.py | 4030 | ç¨‹åºå…¥å£ |
| check_exhaustive_set | local_scanner_v2.py | 1653-1768 | å®Œå¤‡é›†æ£€æµ‹ |
| _check_implication | local_scanner_v2.py | 1760-1955 | è•´å«å¥—åˆ©æ£€æµ‹ |
| _check_equivalent | local_scanner_v2.py | 2065-2128 | ç­‰ä»·å¥—åˆ©æ£€æµ‹ |
| BaseLLMClient | llm_providers.py | 128-179 | LLM æŠ½è±¡æ¥å£ |
| create_llm_client | llm_providers.py | 795-871 | LLM å·¥å‚å‡½æ•° |
| Config ç±» | config.py | 115-250 | é…ç½®ç±» |
| RELATIONSHIP_ANALYSIS_PROMPT_V2 | prompts.py | 24-149 | ä¸»åˆ†æ Prompt |
| SemanticClusterer | semantic_cluster.py | 47 | è¯­ä¹‰èšç±» |

---

## 14. ç›¸å…³æ–‡æ¡£

- **[PROJECT_BIBLE.md](PROJECT_BIBLE.md)** - é¡¹ç›®åœ£ç» (æƒå¨æŒ‡å—ï¼ŒåŒ…å«å®Œæ•´çš„ç­–ç•¥åˆ†æå’ŒæŠ€æœ¯æ¶æ„)
- **[WORK_PLAN.md](WORK_PLAN.md)** - å·¥ä½œè®¡åˆ’ï¼ŒæŸ¥çœ‹å½“å‰é˜¶æ®µå’Œä¸‹ä¸€æ­¥å·¥ä½œ
- **[PROGRESS.md](PROGRESS.md)** - è¯¦ç»†çš„å·¥ä½œæ—¥å¿—å’Œä¼šè¯è®°å½•
- **[README.md](../README.md)** - å¿«é€Ÿå¼€å§‹æŒ‡å—

---

*æœ€åæ›´æ–°: 2026-01-11*
